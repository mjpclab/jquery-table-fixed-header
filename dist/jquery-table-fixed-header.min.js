!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e["jquery-table-fixed-header"]=t(e.jQuery)}(this,function(x){"use strict";x=x&&x.hasOwnProperty("default")?x["default"]:x;var t=Boolean(window.ActiveXObject&&!window.XMLHttpRequest),e=Boolean(window.ActiveXObject&&window.XMLHttpRequest&&!document.documentMode),i=Boolean(window.ActiveXObject&&window.XMLHttpRequest&&document.documentMode&&!window.XMLSerializer),o={headerRows:1,fixedClass:"table-fixed-header regular-table-fixed-header",fixedTop:0};function r(e){"function"!=typeof e.fixedTop&&(e.fixedTop=parseInt(e.fixedTop))}var a=/\s+/g,d=" ",s=".";function u(e,t){var i=function n(e){return(d+e).replace(a,s)}(t);return e.filter("table:not(".concat(i,")"))}function b(e){return"function"==typeof e?e():e}function g(e,t){return e.find("tr:lt("+t+")")}function y(e,t){var i=e.clone(),n=g(i,t),o=n.parent();return i.find("tr").not(n).remove(),i.children().not(o).remove(),i.removeAttr("id").find("[id]").removeAttr("id"),i}var l=window.getComputedStyle?function(e){var t=window.getComputedStyle(e[0]).width;return parseFloat(t)}:e?function(e){var t=parseInt(e.css("border-left-width"))||0,i=parseInt(e.css("border-right-width"))||0;return e.width()+(t+i)/2}:function(e){return e.width()},f=e||i?function(e,t){e.width(t.outerWidth())}:function(e,t){e.width(l(t))};function m(e,o){e.each(function(e,t){var i=x(t),n=o.eq(e);f(i.parent(),n.parent()),i.children().each(function(e,t){var i=x(t),o=n.children().eq(e);i.children().each(function(e,t){var i=x(t),n=o.children().eq(e);i.width(l(n))})})})}var C={margin:"0",padding:"0","table-layout":"fixed",visibility:"hidden",position:"fixed"};var c={headerRows:1,fixedClass:"table-fixed-header container-table-fixed-header",fixedTop:0,scrollContainer:""};return x.fn.tableFixedHeader=function(e){return t?this:e&&e.scrollContainer?function i(e){var o=x.extend({},c,this.data(),e);r(o);var v=o.fixedTop,t=o.fixedClass,w=x(window);return u(this,t).each(function(e,t){var f=x(t),i=g(f,o.headerRows);if(i.length){var c=i.parent(),u=f.data("cloned");if(u){var n=y(f,o.headerRows);u.empty().append(n.children()),m(u.children(),c)}else{var p=f.closest(o.scrollContainer).eq(0);if(!p.length)return;""!==p.css("position")&&"static"!==p.css("position")||p.css("position","relative"),(u=y(f,o.headerRows)).addClass(o.fixedClass),u.css(C),f.data("cloned",u),f.after(u),f.data("positioning",!1);var h=function h(){if(f.is(":visible")&&!f.data("positioning")){f.data("positioning",!0),m(u.children(),c);var e=b(v),t=p.scrollTop()+e,i=f[0].offsetTop;if(i<=t&&t+u.outerHeight()<=i+f.outerHeight()){var n,o,r,a,d=f.outerWidth(),s=p[0].clientWidth-f[0].offsetLeft+p.scrollLeft();o=s<d?(n=s+"px",d-s+"px"):(n="auto","0");var l=p.scrollLeft()-f[0].offsetLeft;a=0<l?r=l+"px":(r="auto","0"),u.css({top:Math.round(p.offset().top-w.scrollTop()+e)+"px",left:f.offset().left-w.scrollLeft()+"px",clip:"rect(auto "+n+" auto "+r+")","clip-path":"inset(0 "+o+" 0 "+a+")",visibility:"visible"})}else u.css("visibility","hidden");f.data("positioning",!1)}};p.scroll(h),w.scroll(h),w.resize(h),h()}}}),this}.call(this,e):function n(e){var l=x.extend({},o,this.data(),e);r(l);var f=l.fixedTop,t=l.fixedClass,c=x(window);return u(this,t).each(function(e,t){var n=x(t),i=g(n,l.headerRows);if(i.length){var o=i.parent(),r=n.data("cloned");if(r){var a=y(n,l.headerRows);r.empty().append(a.children()),m(r.children(),o)}else{var d=c;(r=y(n,l.headerRows)).addClass(l.fixedClass),r.css(C),n.data("cloned",r),n.after(r),n.data("positioning",!1);var s=function s(){if(n.is(":visible")&&!n.data("positioning")){n.data("positioning",!0),m(r.children(),o);var e=b(f),t=d.scrollTop()+e,i=n.offset().top;i<=t&&t+r.outerHeight()<=i+n.outerHeight()?r.css({top:e+"px",left:n.offset().left-c.scrollLeft()+"px",visibility:"visible"}):r.css("visibility","hidden"),n.data("positioning",!1)}};c.scroll(s),c.resize(s),s()}}}),this}.call(this,e)},function n(){x("table.fixed-header").tableFixedHeader()}(),x});
